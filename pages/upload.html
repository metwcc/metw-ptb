<div class="upload">
    <button class="center-x" onclick="uploadFile()">upload</button><a class="center-x"></a>
    <iframe></iframe>
</div>
<style>
    .upload > button { font-size: 150% }
    .upload > a { margin-top: 50px }
    .upload > iframe { width: 100%; height: calc(100% - 70px); margin-top: 70px; border: none }
</style>
<script>
    `::-webkit-scrollbar { width: 16px; } ::-webkit-scrollbar-track { background: black; border-radius: 8px; border: 4px solid transparent; background-clip: padding-box } ::-webkit-scrollbar-thumb { background: gray; border-radius: 8px; border: 4px solid transparent; background-clip: padding-box } ::-webkit-scrollbar-thumb:hover { background: gray; border-radius: 8px; border: 4px solid transparent; background-clip: padding-box }`

    var uploadFile = async () => {
        var file = await filedialog('*'), filename = file.name.split('.'), iframe = by.selector('.upload > iframe')
        filename.pop()
        filename = filename.join('.')
        file = await fileToBase64(file)
        upload(file, filename).then(([json, ok]) => {
            var response = ok ? cdnUrl + json : json
            if (ok) { iframe.src = by.selector('.upload > a').innerText = response; navigator.clipboard.writeText(response) }
            else alert.error(response)
        })
    }
</script>
